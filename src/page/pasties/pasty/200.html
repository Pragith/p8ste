{% extends "../../index.html" %}

{%block page-title %}
    {{user_name|escape}}
    /
    {{ pasty_title }} ({{ pasty_size.0 }} {{ pasty_size.1 }}, {{ pasty_loc }} LOC)
{% endblock %}

{%block h1 %}
    {% if u_user %}
    <a href="{{u_user}}"><img class="user" src="{{u_gravatar}}" alt="{{user_name|escape}}" width="48" height="48" /></a>
    {% endif%}
    {%if u_user %}<a href="{{u_user}}">{{user_name|escape}}</a>{%else%}{{user_name|escape}}{%endif%}
    /
    <a href="{{u_pasty}}">{{ pasty_title }}</a>
    {% if pasty_language_name %} <small>(<a href="{{ pasty_language_url }}">{{ pasty_language_name }}</a>)</small>{% endif %}
{% endblock %}

{% block h1-headers %}{% endblock %}

{%block page-content %}

{% if pasty_is_moderated %}
    <p class="error">This paste has been <strong>moderated</strong>.</p>
{% else %}
    <table class="snippet">
        <tr>
            <td colspan=2 class="head">
                {% if language %}<strong>{{ language }} code</strong>{% else %}<strong>Code</strong>{% endif %}
<ul>
        <li>
            <img src="{{"images/silk/page_white_edit.png"|url}}" alt="" width="16" height="16" />
            <small><a href="{{ u_fork }}"><strong>Fork</strong></a></small>
        </li>
        <li>
            <img src="{{"images/silk/page_white_text.png"|url}}" alt="" width="16" height="16" />
            <small><a href="{{ u_raw_text }}">Export as text</a> or <a href="{{ u_atom }}">atom</a></small>
        </li>
    </ul>
            </td>
        </tr>
        <tr>
            <td class="lines"><pre>{{ pasty_lines}}</pre></td>
            <td class="code"><pre>{{ pasty_code }}</pre></td>
        </tr>
    </table>
{% endif %}


            <h2>
                <a href="{{u_thread}}"><strong>Thread</strong></a>
                <small style="float:right;">
                    <a href="{{ u_thread_atom }}"><img src="{{"images/silk/feed.png"|url}}" alt="Thread atom feed" width="16" height="16" /></a>
                </small>
            </h2>

            {% if is_thread %}
            <ul>
                {% for thread_paste in thread_pastes %}
                {% if thread_paste.open_list %}
                <li><ul>
                {% endif %}
                {% if thread_paste.close_list %}
                </ul></li>
                {% endif %}
                        <li>
                        {% if thread_paste.u_language_image %}<img src="{{ thread_paste.u_language_image|url }}" alt="{{ thread_paste.language_name }}" title="{{ thread_paste.language_name }}" width="16" height="16" /> {% endif %}

                        {% ifequal pasty_slug thread_paste.slug %}<strong>{% endifequal %}
                        {% if thread_paste.is_moderated %}<strike>{% endif %}<a href="{{ thread_paste.u }}">{{ thread_paste.title|escape }}</a>{% if thread_paste.is_moderated %}</strike>{% endif %}

                        <small>
                            &mdash; {{thread_paste.user_name}}
                            {% ifnotequal thread_paste.slug pasty_slug %}
                            [ {% ifequal thread_paste.diff_size.0 0 %}
                                =B
                            {%else%}
                                {{ thread_paste.diff_size.2 }}{{ thread_paste.diff_size.0 }}{{ thread_paste.diff_size.1 }}
                            {% endifequal %}
                            &middot; <a href="{{thread_paste.u_diff}}">Diff</a> ]
                            {% endifnotequal %}
                        </small>
                        {% ifequal pasty_slug thread_paste.slug %}</strong>{% endifequal %}
                        </li>
                {% endfor %}
            </ul>
            {% else %}
            <p class="info"><strong>Did you know ?</strong> You can <a href="{{u_fork}}"><strong>fork</strong></a> this paste : it creates a copy of it so as to let you make whatever change you want on that copy.</p>
            {% endif %}

<h2><strong>Remote diff</strong></h2>
<form action="{{u_remote_diff}}" method="GET">
    <table class="invisible" style="width:500px;">
        <tr>
            <td><input name="url" type="text" /></td>
            <td><input type="submit" value="Diff !" /></td>
        </tr>
    </table>
    <p><small>Compute a diff with any remote HTTP file. Ex: http://github.com/thomas-quemard/p8ste/raw/master/README.markdown</small></p>
</form>

{% endblock %}
