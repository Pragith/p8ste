{% extends "../../index.html" %}

{%block page-title %}
    
    {{ pasty_title }}{% if language %} ({{ language }} paste){% endif %} - {{ pasty_size.0 }} {{ pasty_size.1 }}, {{ pasty_loc }} LOC

{% endblock %}
{%block h1 %}
    {{ pasty_title }}
    {% if pasty_language_name %} <small>(<a href="{{ pasty_language_url }}">{{ pasty_language_name }}</a>)</small>{% endif %}
{% endblock %}

{% block h1-headers %}
<ul>
    <li><img src="/images/silk/user.png" alt="" width="16" height="16" /> {{ user_name }}</li>
    <li><img src="/images/silk/date.png" alt="" width="16" height="16" /> {{ posted_at }}</li>
    {% if pasty_tags %}
    <li>
        <img src="/images/silk/tag_blue.png" alt="" width="16" height="16" />
        {{ pasty_tags }}
    </li>
    {% endif %}
</ul>
{% endblock %}

{%block page-content %}

<p id="paste_info" />

            <h2>
            {% if language %}
            <strong>{{ language }} code</strong>
            {% else %}
            <strong>Code</strong>
            {% endif %}
            <small style="float:right;">
                <img src="/images/silk/page_white_edit.png" alt="" width="16" height="16" />
                <a href="{{ u_edit }}">Fork</a>
                <img src="/images/silk/page_white_text.png" alt="" width="16" height="16" />
                <a href="{{ u_raw_text }}">Export as text</a>
            </small>
            </h2>

            <div class="pasty">
                {% if pasty_is_moderated %}
                <p class="error">This paste has been <strong>moderated</strong>.</p>
                {% else %}
                <table>
                    <tr class="snippet">
                        <td>
                            <table class="lines">
                                {{ pasty_lines}}
                                <tr><td><a href="#">Top</a></td></tr>
                            </table>
                        </td>
                        <td style="width:100%;">
                            <table class="code" id="paste_code">{{ pasty_code }}</table>
                        </td>
                    </tr>
                </table>
                {% endif %}
            </div>

            {% if is_thread %}
            <h2><strong>Thread</strong></h2>
            <table>
                {% for thread_paste in thread_pastes %}
                    <tr>
                        <td>
                        {{ thread_paste.ident }}
                        {% if thread_paste.u_language_image %}<img src="{{ thread_paste.u_language_image }}" width="16" height="16" /> {% endif %}

                        {% ifequal pasty_slug thread_paste.slug %}<strong>{% endifequal %}
                        {% if thread_paste.is_moderated %}<strike>{% endif %}<a href="{{ thread_paste.u }}">{{ thread_paste.title|escape }}</a>{% if thread_paste.is_moderated %}</strike>{% endif %}

                        <small>
                            &middot; {{thread_paste.user_name}}
                            {% ifnotequal thread_paste.slug pasty_slug %}
                            / {% ifequal thread_paste.diff_size.0 0 %}
                                =B
                            {%else%}
                                {{ thread_paste.diff_size.2 }}{{ thread_paste.diff_size.0 }}{{ thread_paste.diff_size.1 }}
                            {% endifequal %}
                            {% endifnotequal %}
                        </small>
                        {% ifequal pasty_slug thread_paste.slug %}</strong>{% endifequal %}
                        </td>
                    </tr>
                {% endfor %}
            </table>
            {% endif %}

{% endblock %}
