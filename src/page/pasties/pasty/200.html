{% extends "../../index.html" %}

{%block page-title %}
   {{ pasty_title }}{% if pasty_language_name %} ({{ pasty_language_name }} paste){% endif %} - {{ pasty_size.0 }} {{ pasty_size.1 }}, {{ pasty_loc }} LOC
{% endblock %}

{%block h1 %}
    {{ pasty_title }}
    {% if pasty_language_name %} <small>(<a href="{{ pasty_language_url }}">{{ pasty_language_name }}</a>)</small>{% endif %}
{% endblock %}

{% block h1-headers %}
<ul>
    <li><img src="/images/silk/user.png" alt="" width="16" height="16" /> {{ user_name }}</li>
    <li><img src="/images/silk/date.png" alt="" width="16" height="16" /> {{ posted_at }}</li>
    {% if pasty_tags %}
    <li>
        <img src="/images/silk/tag_blue.png" alt="" width="16" height="16" />
        {{ pasty_tags }}
    </li>
    {% endif %}
</ul>
{% endblock %}

{%block page-content %}

<p id="paste_info" />

            <h2>
            {% if language %}
            <strong>{{ language }} code</strong>
            {% else %}
            <strong>Code</strong>
            {% endif %}
            <ul>
                <li>
                    <img src="/images/silk/page_white_edit.png" alt="" width="16" height="16" />
                    <small><a href="{{ u_fork }}"><strong>Fork</strong></a></small>
                </li>
                <li>
                    <img src="/images/silk/page_white_text.png" alt="" width="16" height="16" />
                    <small><a href="{{ u_raw_text }}">Export as text</a> or <a href="{{ u_atom }}">atom</a></small>
                </li>
            </ul>
            </h2>

            {% if pasty_is_moderated %}
            <p class="error">This paste has been <strong>moderated</strong>.</p>
            {% else %}

            <table class="snippet">
                <tr>
                    <td class="lines"><pre>{{ pasty_lines}}</pre></td>
                    <td class="code"><pre>{{ pasty_code }}</pre></td>
                </tr>
            </table>
            {% endif %}

            <h2>
                <strong>Thread</strong>
                <small style="float:right;">
                    <a href="{{ u_thread }}"><img src="/images/silk/feed.png" alt="Thread atom feed" width="16" height="16" /></a>
                </small>
            </h2>

            {% if is_thread %}
            <ul>
                {% for thread_paste in thread_pastes %}
                {% if thread_paste.open_list %}
                <li><ul>
                {% endif %}
                {% if thread_paste.close_list %}
                </ul></li>
                {% endif %}
                        <li>
                        {% if thread_paste.u_language_image %}<img src="{{ thread_paste.u_language_image }}" alt="{{ thread_paste.language_name }}" title="{{ thread_paste.language_name }}" width="16" height="16" /> {% endif %}

                        {% ifequal pasty_slug thread_paste.slug %}<strong>{% endifequal %}
                        {% if thread_paste.is_moderated %}<strike>{% endif %}<a href="{{ thread_paste.u }}">{{ thread_paste.title|escape }}</a>{% if thread_paste.is_moderated %}</strike>{% endif %}

                        <small>
                            &middot; {{thread_paste.user_name}}
                            {% ifnotequal thread_paste.slug pasty_slug %}
                            / {% ifequal thread_paste.diff_size.0 0 %}
                                =B
                            {%else%}
                                {{ thread_paste.diff_size.2 }}{{ thread_paste.diff_size.0 }}{{ thread_paste.diff_size.1 }}
                            {% endifequal %}
                            {% endifnotequal %}
                        </small>
                        {% ifequal pasty_slug thread_paste.slug %}</strong>{% endifequal %}
                        </li>
                {% endfor %}
            </ul>
            {% else %}
            <p class="info"><strong>Did you know ?</strong> You can <a href="{{u_fork}}"><strong>fork</strong></a> this paste : it creates a copy of it so as to let you make whatever change you want on that copy.</p>
            {% endif %}

{% endblock %}
